<nav class="nav sidebar flex-column" [ngClass]="{'open': open}" *ngIf="showSidebar">
    <a class="nav-link pt-4" (click)="toggleSidebar()">
        <i class="fa" [ngClass]="{'fa-align-left': !open, 'fa-align-right': open}"></i>
    </a>
    <hr>
    <a title="Account Overview" class="nav-link" routerLink="/account" [routerLinkActive]="['active-head']"
        [ngClass]="{'open': open}" (mouseenter)="setHoverAccount(true)" (mouseleave)="setHoverAccount(false)"><i
            class="fa fa-building"></i>
        <span [hidden]="!open" class="pl-2 nav-label bold">
            {{accountName}}
        </span>
    </a>

    <div class="d-flex"
        [ngClass]="{'flex-column not-open': !open, 'icon-row open': open, 'hidden': checkHideAccountLinks()}"
        (mouseenter)="setHoverAccount(true)" (mouseleave)="setHoverAccount(false)">
        <a title="Account Overview" class="nav-link" routerLink="/account/home" [routerLinkActive]="['active']"><i
                class="fa fa-home"></i>
        </a>
        <a title="Account Overview" class="nav-link" routerLink="/account/overview" [routerLinkActive]="['active']"><i
                class="fa fa-chart-column"></i>
        </a>
        <a title="Account Analysis" class="nav-link" routerLink="/account/analysis" [routerLinkActive]="['active']"><i
                class="fa fa-microscope"></i>
        </a>
        <a title="Account Reports" class="nav-link" routerLink="/account/reports" [routerLinkActive]="['active']"><i
                class="fa fa-folder"></i>
        </a>
        <a title="Account Settings" class="nav-link" routerLink="/account/settings" [routerLinkActive]="['active']"><i
                class="fa fa-cog"></i>
        </a>
        <a title="Custom Data" class="nav-link" routerLink="/account/custom-data" [routerLinkActive]="['active']"><i
                class="fa fa-database"></i>
        </a>
    </div>
    <hr class="bold-hr">
    <div *ngFor="let facility of facilityList | facilityList:(showAllFacilities && open); let index = index;"
        [ngClass]="{'open': open, 'not-open': !open}" (mouseenter)="setHoverIndex(index)"
        (mouseleave)="setHoverIndex(undefined)">
        <a title="Facility Overview" class="nav-link" routerLink="/facility/{{facility.id}}"
            [routerLinkActive]="['active-head']"><i class="fa fa-industry" [ngStyle]="{color: facility.color}"></i>
            <span [hidden]="!open" class="pl-2 nav-label">
                {{facility.guid | facilityName}}
            </span>
        </a>
        <div class="d-flex icon-row"
            [ngClass]="{'flex-column not-open': !open, 'icon-row': open, 'hidden': checkHideFacilityLinks(facility.guid, index)}">
            <a title="Facility Home" class="nav-link" routerLink="/facility/{{facility.id}}/home"
                [routerLinkActive]="['active']"><i class="fa fa-home"></i>
            </a>
            <a title="Facility Utility Data" class="nav-link" routerLink="/facility/{{facility.id}}/utility"
                [routerLinkActive]="['active']"><i class="fa fa-book"></i>
            </a>
            <a title="Facility Overview" class="nav-link" routerLink="/facility/{{facility.id}}/overview"
                [routerLinkActive]="['active']"><i class="fa fa-chart-column"></i>
            </a>
            <a title="Facility Data Visualization" class="nav-link" routerLink="/facility/{{facility.id}}/visualization"
                [routerLinkActive]="['active']"><i class="fa fa-chart-line"></i>
            </a>
            <a title="Facility Analysis" class="nav-link" routerLink="/facility/{{facility.id}}/analysis"
                [routerLinkActive]="['active']"><i class="fa fa-microscope"></i>
            </a>
            <a title="Facility Settings" class="nav-link" routerLink="/facility/{{facility.id}}/settings"
                [routerLinkActive]="['active']"><i class="fa fa-cog"></i>
            </a>
        </div>
        <hr>
    </div>
    <a *ngIf="facilityList.length > 4" class="nav-link" [hidden]="!open" (click)="toggleShowAllFacilities()">
        <span *ngIf="!showAllFacilities"><i class="fa fa-chevron-down"></i> Show All Facilities</span>
        <span *ngIf="showAllFacilities"><i class="fa fa-chevron-up"></i> Show First Four Facilities</span>
    </a>
    <hr *ngIf="facilityList.length > 4 && open">
    <a class="nav-link" routerLink="/upload" [routerLinkActive]="['active']"><i class="fa fa-upload"></i> <span
            [hidden]="!open" class="pl-2 nav-label">Upload Data</span> </a>
    <a class="nav-link" routerLink="/help" [routerLinkActive]="['active']"
        [routerLinkActiveOptions]="{ exact: true }"><i class="fa fa-question"></i> <span [hidden]="!open"
            class="pl-2 nav-label">Help</span> </a>
    <a class="nav-link" routerLink="/about" [routerLinkActive]="['active']"
        [routerLinkActiveOptions]="{ exact: true }"><i class="fa fa-info-circle"></i> <span [hidden]="!open"
            class="pl-2 nav-label">About</span></a>
    <a class="nav-link" routerLink="/feedback" [routerLinkActive]="['active']"
        [routerLinkActiveOptions]="{ exact: true }"><i class="fa fa-inbox"></i> <span [hidden]="!open"
            class="pl-2 nav-label">Feedback</span></a>
    <a class="nav-link" routerLink="/acknowledgments" [routerLinkActive]="['active']"
        [routerLinkActiveOptions]="{ exact: true }"><i class="fa fa-trophy"></i>
        <span [hidden]="!open" class="pl-2 nav-label">Acknowledgments</span></a>
    <hr>
    <a class="nav-link" *ngIf="isDev" routerLink="style-guide" [routerLinkActive]="['active']"
        [routerLinkActiveOptions]="{ exact: true }"><i class="fa fa-star"></i> <span [hidden]="!open"
            class="pl-2 nav-label">Style
            Guide</span></a>
</nav>