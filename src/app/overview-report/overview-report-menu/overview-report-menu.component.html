<div class="filter">
    <div class="filter-dropdown" *ngIf="reportOptions">
        <div class="row">
            <div class="col-6">
                <label for="reportName">
                    Report Name
                </label>
                <input type="text" class="form-control" name="reportName" id="reportName" [(ngModel)]="name" />
                <hr>
            </div>
            <div class="col-6 text-right">
                <div class="form-group">
                    <label class="text-left" for="selectTemplate">
                        Report Template
                    </label>
                    <select id="selectTemplate" [(ngModel)]="reportOptions.templateId" name="templateId"
                        class="form-control">
                        <option [ngValue]=undefined>Custom</option>
                        <option [ngValue]="99999">Better Plants Report</option>
                        <option *ngFor="let template of reportTemplates" [ngValue]="template.id">{{template.name}}
                        </option>
                    </select>
                </div>
                <a class="small" (click)="showSaveTemplate()" *ngIf="reportOptions.templateId == undefined">Save
                    Custom Template</a>
                <a class="small edit-templates" (click)="editTemplates()" *ngIf="reportTemplates.length != 0">Edit
                    Templates</a>
                <hr>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label for="reportTitle">Report Cover Title</label>
                    <textarea class="form-control" name="reportTitle" id="reportTitle"
                        [(ngModel)]="reportOptions.title"></textarea>
                </div>
                <div class="form-group">
                    <label for="reportNotes">Report Notes</label>
                    <textarea class="form-control" name="reportNotes" id="reportNotes"
                        [(ngModel)]="reportOptions.notes"></textarea>
                </div>
            </div>
            <div class="col-6">
                <label>Account Report Options</label>
                <label for="includeAccount">
                    <input class="checkbox" type="checkbox" id="includeAccount" name="includeAccount"
                        [(ngModel)]="reportOptions.includeAccount">Include Account Report
                </label>
                <label for="accountInfo" *ngIf="reportOptions.includeAccount">
                    <input class="checkbox" type="checkbox" id="accountInfo" name="accountInfo"
                        [(ngModel)]="reportOptions.accountInfo">Include Account Info
                </label>
                <label for="facilitySummaryTable" *ngIf="reportOptions.includeAccount">
                    <input class="checkbox" type="checkbox" id="facilitySummaryTable" name="facilitySummaryTable"
                        [(ngModel)]="reportOptions.facilitySummaryTable">Include Facility Summary
                    Table
                </label>

                <label for="accountUtilityTable" *ngIf="reportOptions.includeAccount">
                    <input class="checkbox" type="checkbox" id="accountUtilityTable" name="accountUtilityTable"
                        [(ngModel)]="reportOptions.accountUtilityTable">Include Account Utility Table
                </label>
                <label for="accountFacilityCharts" *ngIf="reportOptions.includeAccount">
                    <input class="checkbox" type="checkbox" id="accountFacilityCharts" name="accountFacilityCharts"
                        [(ngModel)]="reportOptions.accountFacilityCharts">Include Account Facility
                    Charts
                </label>
                <label for="accountFacilityAnnualBarChart" *ngIf="reportOptions.includeAccount">
                    <input class="checkbox" type="checkbox" id="accountFacilityAnnualBarChart"
                        name="accountFacilityAnnualBarChart"
                        [(ngModel)]="reportOptions.accountFacilityAnnualBarChart">Include Annual Facility Bar Charts
                </label>
                <hr>
                <label>Facility Reports Options</label>
                <label for="includeFacilities">
                    <input class="checkbox" type="checkbox" id="includeFacilities" name="includeFacilities"
                        [(ngModel)]="reportOptions.includeFacilities">Include Facility Reports
                </label>
                <div *ngIf="reportOptions.includeFacilities">
                    <label *ngFor="let facility of reportUtilityOptions.facilities; let index = index;"
                        for="{{'facility_'+index}}">
                        <input class="checkbox" type="checkbox" id="{{'facility_'+index}}" name="{{'facility_'+index}}"
                            [(ngModel)]="facility.selected">Include
                        <b>{{facility.name}}</b>
                    </label>

                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col-6">
                        <label>Include Utility Types</label>
                        <label for="electricity">
                            <input class="checkbox" type="checkbox" id="electricity" name="electricity"
                                [(ngModel)]="reportUtilityOptions.electricity">Electricity
                        </label>
                        <label for="naturalGas">
                            <input class="checkbox" type="checkbox" id="naturalGas" name="naturalGas"
                                [(ngModel)]="reportUtilityOptions.naturalGas">Natural
                            Gas
                        </label>
                        <label for="otherFuels">
                            <input class="checkbox" type="checkbox" id="otherFuels" name="otherFuels"
                                [(ngModel)]="reportUtilityOptions.otherFuels">Other
                            Fuels
                        </label>
                    </div>
                    <div class="col-6">
                        <label for="otherEnergy">
                            <input class="checkbox" type="checkbox" id="otherEnergy" name="otherEnergy"
                                [(ngModel)]="reportUtilityOptions.otherEnergy">Other
                            Energy
                        </label>
                        <label for="water">
                            <input class="checkbox" type="checkbox" id="water" name="water"
                                [(ngModel)]="reportUtilityOptions.water">Water
                        </label>
                        <label for="wasteWater">
                            <input class="checkbox" type="checkbox" id="wasteWater" name="wasteWater"
                                [(ngModel)]="reportUtilityOptions.wasteWater">Waste
                            Water
                        </label>
                        <label for="otherUtility">
                            <input class="checkbox" type="checkbox" id="otherUtility" name="otherUtility"
                                [(ngModel)]="reportUtilityOptions.otherUtility">Other
                            Utility
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-6" *ngIf="reportOptions.includeFacilities">
                <div class="row">
                    <div class="col-6">
                        <label>Facility Report Items</label>
                        <label for="facilityInfo">
                            <input class="checkbox" type="checkbox" id="facilityInfo" name="facilityInfo"
                                [(ngModel)]="reportOptions.facilityInfo">Facility Info
                        </label>
                        <label for="facilityMetersTable">
                            <input class="checkbox" type="checkbox" id="facilityMetersTable" name="facilityMetersTable"
                                [(ngModel)]="reportOptions.facilityMetersTable">Meters Summary Table
                        </label>
                        <label for="facilityUtilityUsageTable">
                            <input class="checkbox" type="checkbox" id="facilityUtilityUsageTable"
                                name="facilityUtilityUsageTable"
                                [(ngModel)]="reportOptions.facilityUtilityUsageTable">Utility Usage Table
                        </label>
                        <label for="facilityBarCharts">
                            <input class="checkbox" type="checkbox" id="facilityBarCharts" name="facilityBarCharts"
                                [(ngModel)]="reportOptions.facilityBarCharts">Bar Charts
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row justify-content-between">
            <div class="col">
                <button class="btn btn-danger" (click)="goToDashboard()">Return to Dashboard</button>
            </div>
            <div class="col text-right">
                <button *ngIf="!selectedReportOptions" class="btn btn-primary" (click)="createReport()"><span
                        class="fa fa-save"></span> Create
                    Report</button>
                <button *ngIf="selectedReportOptions" class="btn btn-secondary mr-2" (click)="cancelChanges()">Discard
                    Changes</button>
                <button *ngIf="selectedReportOptions" class="btn btn-primary" (click)="updateReport()"><span
                        class="fa fa-save"></span> Update
                    Report</button>
            </div>
        </div>
    </div>
</div>

<!--save template modal-->
<div class="popup" [class.open]="displayCreateTemplate">
    <div class="popup-header" *ngIf="displayCreateTemplate">Create New Report Template
        <button class="item-right" (click)="cancelNewTemplate()">x</button>
    </div>
    <div class="popup-body">
        <label class="pl-0" for="templateName">Template Name</label>
        <input type="text" id="templateName" name="templateName" [(ngModel)]="templateName" class="form-control">
    </div>
    <div class="saveCancel popup-footer text-right">
        <button class="btn btn-secondary" (click)="cancelNewTemplate()">Cancel</button>
        <button class="btn btn-success" (click)="saveTemplate()">Save</button>
    </div>
</div>


<!-- 
<div class="window" [class.open]="predictorEntryToEdit">
    <div class="windowOverlay"></div>
    <div class="windowContent windowContentMed">
        <h4>Edit/Delete Templates</h4>
        <br>

        <div class="row" *ngIf="!predictorToDelete">
            <div class="col">
                <p class="bold">Template Name</p>
            </div>
            <div class="col-4">
                <p class="bold">Units</p>
            </div>
            <div class="col-2">
                <p class="bold">Production?</p>
            </div>
            <div class="col-1">
                <!-- <p class="bold">Delete</p> --
            </div>
        </div>
    </div>
</div> -->