<div class="report print-break-before" [ngClass]="{'print': print}">
    <h4>
        Monthly Facility Analysis
    </h4>
    <ng-container *ngIf="analysisReportSettings.facilityMonthlyResultsTableBaselineYear">
        <ng-template [ngIf]="!print || !(analysisReportSettings.analysisTableColumns | breakUpTableForPrint: 'monthly')" [ngIfElse]="baselinePrintBlock">
            <div class="scroll-x">
                <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData"
                    [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                    [isBaselineYear]="true" [printBlock]="'all'">
                </app-monthly-analysis-summary-table>
            </div>
        </ng-template>
        <ng-template #baselinePrintBlock>
            <app-monthly-analysis-summary-table
                *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'consumption'"
                [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData" [analysisItem]="analysisItem"
                [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isBaselineYear]="true"
                [printBlock]="'consumption'">
            </app-monthly-analysis-summary-table>

            <app-monthly-analysis-summary-table
                *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'predictors'"
                [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData" [analysisItem]="analysisItem"
                [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isBaselineYear]="true"
                [printBlock]="'predictors'">
            </app-monthly-analysis-summary-table>

            <!--TODO: Never Savings in Baseline Year right...?-->
            <!-- <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData"
                [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                [isReportBaselineYear]="true" [printBlock]="'savings'">
            </app-monthly-analysis-summary-table> -->
        </ng-template>
    </ng-container>
    <ng-container *ngIf="analysisReportSettings.facilityMonthlyResultsTableReportYear">
        <ng-template [ngIf]="!print || !(analysisReportSettings.analysisTableColumns | breakUpTableForPrint: 'monthly')" [ngIfElse]="reportPrintBlock">
            <div class="scroll-x">
                <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData"
                    [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                    [isReportYear]="true" [printBlock]="'all'">
                </app-monthly-analysis-summary-table>
            </div>
        </ng-template>
        <ng-template #reportPrintBlock>
            <app-monthly-analysis-summary-table
                *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'consumption'"
                [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData" [analysisItem]="analysisItem"
                [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="true"
                [printBlock]="'consumption'">
            </app-monthly-analysis-summary-table>

            <app-monthly-analysis-summary-table
                *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'predictors'"
                [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData" [analysisItem]="analysisItem"
                [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="true"
                [printBlock]="'predictors'">
            </app-monthly-analysis-summary-table>

            <app-monthly-analysis-summary-table
                *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'savings'"
                [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData" [analysisItem]="analysisItem"
                [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="true"
                [printBlock]="'savings'">
            </app-monthly-analysis-summary-table>
        </ng-template>
    </ng-container>
    <hr>
    <ng-container *ngIf="analysisReportSettings.facilityMonthlyResultsGraphs">
        <div class="d-flex w-100 print-break-avoid" [ngClass]="{'flex-column': print}">
            <div [ngClass]="{'w-50 pe-1': !print, 'w-100 pb-3': print}">
                <app-monthly-analysis-summary-graph [monthlyAnalysisSummaryData]="monthlyAnalysisSummaryData"
                    [analysisItem]="analysisItem" [facilityOrAccount]="facility">
                </app-monthly-analysis-summary-graph>
            </div>
            <div [ngClass]="{'w-50 pe-1': !print, 'w-100': print}">
                <app-monthly-analysis-summary-savings-graph [analysisItem]="analysisItem"
                    [monthlyAnalysisSummaryData]="monthlyAnalysisSummaryData" [facilityOrAccount]="facility">
                </app-monthly-analysis-summary-savings-graph>
            </div>
        </div>
    </ng-container>
</div>