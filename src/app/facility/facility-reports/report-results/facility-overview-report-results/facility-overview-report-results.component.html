<div class="report" *ngIf="calculating != false">
    <app-calculating-spinner [message]="'Calculating Overview...'"
        [error]="calculating == 'error'"></app-calculating-spinner>
</div>


<ng-container *ngIf="calculating == false">
    <ng-container *ngIf="overviewReportSettings.includeEnergySection">
        <hr>
        <!--facility energy consumption-->
        <div class="report print-break-before" [ngClass]="{'print': print}">
            <div class="row justify-content-center print-break-before">
                <div class="text-center">
                    <h3>
                        {{ facilityReport.name }}
                    </h3>
                    <h6>
                        Generated By VERIFI
                    </h6>
                </div>
                <div class="report-page">
                    <h4>{{facility.guid | facilityName}} Energy Consumption</h4>
                    <app-facility-section-report [dataType]="'energyUse'" [facility]="facility"
                        [calanderizedMeters]="calanderizedMeters"
                        [yearMonthData]="facilityOverviewData.energyYearMonthData"
                        [annualSourceData]="facilityOverviewData.annualSourceData"
                        [facilityOverviewMeters]="facilityOverviewData.energyMeters"
                        [facilityOverviewData]="facilityOverviewData"
                        [sourcesUseAndCost]="utilityUseAndCost.energyUseAndCost"
                        [useAndCostTotal]="utilityUseAndCost.energyTotal" [dateRange]="dateRange"
                        [previousYear]="utilityUseAndCost.previousYear"
                        [inFacilityReport]="true"></app-facility-section-report>
                </div>
            </div>
        </div>
    </ng-container>
    <!--facility water consumption-->
    <ng-container *ngIf="overviewReportSettings.includeWaterSection">
        <hr>
        <div class="report print-break-before" [ngClass]="{'print': print}">
            <div class="row justify-content-center print-break-before">
                <div class="text-center" *ngIf="!overviewReportSettings.includeEnergySection">
                    <h3>
                        {{ facilityReport.name }}
                    </h3>
                    <h6>
                        Generated By VERIFI
                    </h6>
                </div>
                <div class="report-page">
                    <h4>{{facility.guid | facilityName}} Water</h4>
                    <app-facility-section-report [dataType]="'water'" [facility]="facility"
                        [calanderizedMeters]="calanderizedMeters"
                        [yearMonthData]="facilityOverviewData.waterYearMonthData"
                        [annualSourceData]="facilityOverviewData.annualSourceData"
                        [facilityOverviewMeters]="facilityOverviewData.waterMeters"
                        [facilityOverviewData]="facilityOverviewData"
                        [sourcesUseAndCost]="utilityUseAndCost.waterUseAndCost"
                        [useAndCostTotal]="utilityUseAndCost.waterTotal" [dateRange]="dateRange"
                        [previousYear]="utilityUseAndCost.previousYear"
                        [inFacilityReport]="true"></app-facility-section-report>
                </div>
            </div>
        </div>
    </ng-container>
    <!--facility costs-->
    <ng-container *ngIf="overviewReportSettings.includeCostsSection">
        <hr>
        <div class="report print-break-before" [ngClass]="{'print': print}">
            <div class="row justify-content-center print-break-before">
                <div class="text-center" *ngIf="!overviewReportSettings.includeEnergySection 
                && !overviewReportSettings.includeWaterSection">
                    <h3>
                        {{ facilityReport.name }}
                    </h3>
                    <h6>
                        Generated By VERIFI
                    </h6>
                </div>
                <div class="report-page">
                    <h4>{{facility.guid | facilityName}} Costs</h4>
                    <app-facility-section-report [dataType]="'cost'" [facility]="facility"
                        [calanderizedMeters]="calanderizedMeters"
                        [yearMonthData]="facilityOverviewData.allSourcesYearMonthData"
                        [annualSourceData]="facilityOverviewData.annualSourceData"
                        [facilityOverviewMeters]="facilityOverviewData.costMeters"
                        [facilityOverviewData]="facilityOverviewData"
                        [sourcesUseAndCost]="utilityUseAndCost.allSourcesUseAndCost"
                        [useAndCostTotal]="utilityUseAndCost.allSourcesTotal" [dateRange]="dateRange"
                        [previousYear]="utilityUseAndCost.previousYear"
                        [inFacilityReport]="true"></app-facility-section-report>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="overviewReportSettings.includeEmissionsSection">
        <hr>
        <div class="report print-break-before" [ngClass]="{'print': print}">
            <!--facility emissions-->
            <div class="row justify-content-center print-break-before">
                <div class="text-center" *ngIf="!overviewReportSettings.includeEnergySection 
                && !overviewReportSettings.includeWaterSection && !overviewReportSettings.includeCostsSection">
                    <h6>
                        Generated By VERIFI
                    </h6>
                </div>
                <div class="report-page">
                    <h4>{{facility.guid | facilityName}} Emissions</h4>
                    <app-facility-section-report [dataType]="'emissions'" [facility]="facility"
                        [calanderizedMeters]="calanderizedMeters"
                        [yearMonthData]="facilityOverviewData.allSourcesYearMonthData"
                        [annualSourceData]="facilityOverviewData.annualSourceData"
                        [facilityOverviewMeters]="facilityOverviewData.costMeters"
                        [facilityOverviewData]="facilityOverviewData"
                        [sourcesUseAndCost]="utilityUseAndCost.allSourcesUseAndCost"
                        [useAndCostTotal]="utilityUseAndCost.allSourcesTotal" [dateRange]="dateRange"
                        [previousYear]="utilityUseAndCost.previousYear"
                        [inFacilityReport]="true"></app-facility-section-report>
                </div>
            </div>
        </div>
    </ng-container>
</ng-container>
<app-facility-print-report-button></app-facility-print-report-button>