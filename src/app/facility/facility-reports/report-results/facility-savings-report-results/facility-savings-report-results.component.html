<ng-container *ngIf="facilityReport && calculating != true">
    <div class="report" [ngClass]="{'print': print}">
        <div class="text-center">
            <h3>
                {{ facilityReport.name }}
            </h3>
            <h6>
                Generated By VERIFI
            </h6>
        </div>
        <ng-container>
            <div class="mt-5">
                <h4>
                    Annual Facility Analysis
                </h4>
            </div>
            <div class="scroll-x">
                <app-annual-analysis-summary-table *ngIf="annualAnalysisSummaries"
                    [annualAnalysisSummary]="annualAnalysisSummaries" [analysisItem]="analysisItem"
                    [accountOrFacility]="facility" [printBlock]="'all'" [inReport]="true">
                </app-annual-analysis-summary-table>
            </div>
            <hr>
        </ng-container>

        <ng-container>
            <ng-container *ngFor="let groupSummary of groupSummaries; let i = index">
                <div class="mt-5">
                    <h4>
                        {{groupSummary.group.idbGroupId | groupName}} Annual Results
                    </h4>
                </div>
                <div class="scroll-x">
                    <app-annual-analysis-summary-table *ngIf="annualAnalysisSummaries"
                        [annualAnalysisSummary]="groupSummary.annualAnalysisSummaryData" [analysisItem]="analysisItem"
                        [accountOrFacility]="facility" [printBlock]="'all'" [inReport]="true"
                        [group]="groupSummary.group">
                    </app-annual-analysis-summary-table>
                </div>
                <hr>
                <div class="mt-5">
                    <h4>
                        {{groupSummary.group.idbGroupId | groupName}} Monthly Results
                    </h4>
                </div>
                <div class="scroll-x">
                    <app-monthly-analysis-summary-graph *ngIf="monthlyAnalysisSummaryData"
                        [monthlyAnalysisSummaryData]="groupSummary.monthlyAnalysisSummaryData"
                        [analysisItem]="analysisItem" [facilityOrAccount]="facility">
                    </app-monthly-analysis-summary-graph>
                </div>
                <hr>
                <app-rolling-energy-consumption-graph *ngIf="monthlyAnalysisSummaryData"
                    [monthlyAnalysisSummaryData]="groupSummary.monthlyAnalysisSummaryData" [analysisItem]="analysisItem"
                    [facilityOrAccount]="facility"></app-rolling-energy-consumption-graph>
                <hr>
                <app-rolling-energy-savings-graph *ngIf="monthlyAnalysisSummaryData"
                    [monthlyAnalysisSummaryData]="groupSummary.monthlyAnalysisSummaryData" [analysisItem]="analysisItem"
                    [facilityOrAccount]="facility"></app-rolling-energy-savings-graph>
                <hr>
            </ng-container>
        </ng-container>
    </div>
</ng-container>

<div class="report" *ngIf="calculating != false">
    <app-calculating-spinner [message]="'Calculating Overview...'"
        [error]="calculating == 'error'"></app-calculating-spinner>
</div>


<app-facility-print-report-button></app-facility-print-report-button>