<div class="row" *ngIf="!groupHasError">
    <div class="col-md-6 col-sm-12">
        <div class="form-group">
            <label class="bold">Analysis Type </label>
            <div>
                <input type="radio" class="rowToggle" name="analysisType" [value]="'absoluteEnergyIntensity'"
                    id="absoluteEnergyIntensity" [(ngModel)]="group.analysisType" (change)="saveItem()" disabled>
                <label class="checkbox" for="absoluteEnergyIntensity">Absolute Energy Consumption</label>

                <input type="radio" class="rowToggle" name="analysisType" [value]="'energyIntensity'"
                    id="energyIntensity" [(ngModel)]="group.analysisType" (change)="saveItem()">
                <label class="checkbox" for="energyIntensity">Energy Intensity</label>

                <input type="radio" class="rowToggle" name="analysisType" [value]="'modifiedEnergyIntensity'"
                    id="modifiedEnergyIntensity" [(ngModel)]="group.analysisType" (change)="saveItem()" disabled>
                <label class="checkbox" for="modifiedEnergyIntensity">Modified Energy Intensity</label>

                <input type="radio" class="rowToggle" name="analysisType" [value]="'regression'" id="regression"
                    [(ngModel)]="group.analysisType" (change)="saveItem()">
                <label class="checkbox" for="regression">Regression</label>
            </div>
        </div>
    </div>
    <!--energy intensity-->
    <div class="col-md-6 col-sm-12" *ngIf="group.analysisType == 'energyIntensity'">
        <label class="bold">Production Variables</label>
        <div class="form-group">
            <span *ngFor="let predictor of group.predictorVariables">
                <label class="checkbox-label" *ngIf="predictor.production" for="{{'predictor_'+predictor.id}}">
                    <input class="checkbox" type="checkbox" id="{{'predictor_'+predictor.id}}"
                        name="{{'predictor_'+predictor.id}}" [(ngModel)]="predictor.productionInAnalysis"
                        (change)="setProductionUnits()">{{predictor.name}} <span
                        *ngIf="predictor.unit">({{predictor.unit}})</span>
                </label>
            </span>
        </div>
        <div class="form-group">
            <label class="w-50 bold">Production Units</label>
            <input class="w-50" type="text" name="productionUnits" [(ngModel)]="group.productionUnits"
                id="productionUnits" disabled>
        </div>
        <div class="alert alert-warning" *ngIf="showUnitsWarning">
            Make sure the production variables you have selected have the same units.
        </div>
    </div>

    <!--regression-->
    <div class="col-md-6 col-sm-12" *ngIf="group.analysisType == 'regression'">
        <div class="row bold mb-2">
            <div class="col-4">
                Predictor Variables
            </div>
            <div class="col-4">
                Use for Regression
            </div>
            <div class="col-4">
                Regression Coefficient
            </div>
        </div>
        <div class="row" *ngFor="let predictor of group.predictorVariables">
            <div class="col-4">
                {{predictor.name}}
            </div>
            <div class="col-4">
                <label class="switch" for="{{'predictor_'+predictor.id}}">
                    <input class="checkbox" type="checkbox" id="{{'predictor_'+predictor.id}}"
                        name="{{'predictor_'+predictor.id}}" [(ngModel)]="predictor.productionInAnalysis"
                        (change)="saveItem()">
                    <span class="slider round"></span>
                </label>
            </div>
            <div class="col-4">
                <input *ngIf="predictor.productionInAnalysis" type="number" step="any"
                    id="{{'regressionCoefficient_'+predictor.id}}" name="{{'regressionCoefficient_'+predictor.id}}"
                    [(ngModel)]="predictor.regressionCoefficient" required (input)="saveItem()">
                <span class="bold" *ngIf="!predictor.productionInAnalysis">&mdash;</span>
            </div>
        </div>
    </div>
</div>

<div class="p-4" *ngIf="groupHasError">
    <div class="alert alert-danger text-center">
        No meters found for this group. Analysis cannot be conducted on this group! Go to the <a
            [routerLink]="'/utility/meter-groups'">Meter Grouping Page</a> to add
        meters to this group for analysis.
    </div>
</div>