<div class="d-flex w-100 justify-content-end mb-2">
    <app-table-items-dropdown></app-table-items-dropdown>
    <div class="ps-2">
        <button class="btn nav-btn" (click)="uploadData()"><i class="fa fa-upload"></i> Import Data</button>
    </div>
    <div class="ps-2">
        <button class="btn action-btn" (click)="addPredictor()"><i class="fa fa-plus"></i> Add
            New Predictor</button>
    </div>
</div>

<div class="table-responsive">
    <table class="table utility-data table-sm table-bordered table-hover" #predictorTable>
        <thead class="sortable">
            <tr>
                <th>
                    Name
                </th>
                <th>
                    Units
                </th>
                <th class="is-production">
                    Is Production?
                </th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            <tr *ngFor="let predictor of facilityPredictors">
                <td>
                    <a (click)="selectEditPredictor(predictor)">
                        <span *ngIf="predictor.predictorType == 'Weather'" class="fa fa-temperature-half"></span>
                        {{predictor.name}}</a>
                </td>
                <td>
                    {{predictor.unit}}
                </td>
                <td>
                    <span *ngIf="predictor.production">Yes</span>
                    <span *ngIf="!predictor.production">No</span>
                </td>
                <td class="actions">
                    <div class="btn-group">
                        <button class="btn btn-sm btn-outline" (click)="selectEditPredictor(predictor)" title="Edit">
                            <i class="fa fa-pencil"></i>
                        </button>
                        <button class="btn btn-sm btn-outline" (click)="selectDelete(predictor)" title="Delete">
                            <i class="fa fa-trash"></i>
                        </button>

                        <button *ngIf="predictor.predictorType == 'Weather'" class="btn btn-sm btn-outline"
                            (click)="viewWeatherData(predictor)" title="View Weather Data">
                            <i class="fa fa-temperature-half"></i>
                        </button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div [ngClass]="{'windowOverlay': predictorToDelete}"></div>
<div class="popup" [class.open]="predictorToDelete">
    <div class="popup-header">
        Delete {{predictorToDelete?.name}}?
        <button class="item-right" (click)="cancelDelete()">x</button>
    </div>
    <div class="popup-body">
        <p>WARNING:
            Are you sure you want to delete "{{predictorToDelete?.name}}"? This cannot be undone.</p>
    </div>
    <div class="saveCancel popup-footer text-end">
        <button class="btn btn-secondary" (click)="cancelDelete()">Cancel</button>
        <button class="btn btn-danger" (click)="confirmDelete()">Confirm Delete</button>
    </div>
</div>