<!--baseline year-->
<ng-container *ngIf="analysisReportSettings.groupMonthlyResultsTableBaselineYear">
    <ng-template [ngIf]="!print || !(analysisReportSettings.analysisTableColumns | breakUpTableForPrint: 'monthly')"
        [ngIfElse]="baselinePrintBlock">
        <div class="scroll-x">
            <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData"
                [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                [isReportYear]="false" [isBaselineYear]="true" [printBlock]="'all'"
                [isGroupModelYear]="modelYearIsBaselineYear">
            </app-monthly-analysis-summary-table>
        </div>
    </ng-template>
    <ng-template #baselinePrintBlock>
        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'consumption'"
            [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="false"
            [isBaselineYear]="true" [printBlock]="'consumption'" [isGroupModelYear]="modelYearIsBaselineYear">
        </app-monthly-analysis-summary-table>
        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'predictors'"
            [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="false"
            [isBaselineYear]="true" [printBlock]="'predictors'" [isGroupModelYear]="modelYearIsBaselineYear">
        </app-monthly-analysis-summary-table>

        <!--TODO: Never Savings in Baseline Year right...?-->
        <!-- <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="baselineYearAnalysisSummaryData"
                [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                [isReportBaselineYear]="true" [printBlock]="'savings'">
            </app-monthly-analysis-summary-table> -->
    </ng-template>
</ng-container>

<!--model year-->
<ng-container
    *ngIf="analysisReportSettings.groupMonthlyResultsTableModelYear && !modelYearIsBaselineYear && !modelYearIsReportYear && modelYearAnalysisSummaryData">
    <ng-template [ngIf]="!print || !(analysisReportSettings.analysisTableColumns | breakUpTableForPrint: 'monthly')"
        [ngIfElse]="reportPrintBlock">
        <div class="scroll-x">
            <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="modelYearAnalysisSummaryData"
                [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                [isGroupModelYear]="true" [printBlock]="'all'">
            </app-monthly-analysis-summary-table>
        </div>
    </ng-template>
    <ng-template #reportPrintBlock>
        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'consumption'"
            [monthlyAnalysisSummaryData]="modelYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isGroupModelYear]="true"
            [printBlock]="'consumption'">
        </app-monthly-analysis-summary-table>

        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'predictors'"
            [monthlyAnalysisSummaryData]="modelYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isGroupModelYear]="true"
            [printBlock]="'predictors'">
        </app-monthly-analysis-summary-table>

        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'savings'"
            [monthlyAnalysisSummaryData]="modelYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isGroupModelYear]="true"
            [printBlock]="'savings'">
        </app-monthly-analysis-summary-table>
    </ng-template>
</ng-container>



<!--report year-->
<ng-container *ngIf="analysisReportSettings.groupMonthlyResultsTableReportYear">
    <ng-template [ngIf]="!print || !(analysisReportSettings.analysisTableColumns | breakUpTableForPrint: 'monthly')"
        [ngIfElse]="reportPrintBlock">
        <div class="scroll-x">
            <app-monthly-analysis-summary-table [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData"
                [analysisItem]="analysisItem" [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true"
                [isReportYear]="true" [printBlock]="'all'" [isGroupModelYear]="modelYearIsReportYear">
            </app-monthly-analysis-summary-table>
        </div>
    </ng-template>
    <ng-template #reportPrintBlock>
        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'consumption'"
            [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="true"
            [isBaselineYear]="false" [printBlock]="'consumption'" [isGroupModelYear]="modelYearIsReportYear">
        </app-monthly-analysis-summary-table>

        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'predictors'"
            [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="true"
            [isBaselineYear]="false" [printBlock]="'predictors'" [isGroupModelYear]="modelYearIsReportYear">
        </app-monthly-analysis-summary-table>

        <app-monthly-analysis-summary-table
            *ngIf="analysisReportSettings.analysisTableColumns | includeTable: 'savings'"
            [monthlyAnalysisSummaryData]="reportYearAnalysisSummaryData" [analysisItem]="analysisItem"
            [facilityOrAccount]="facility" [itemsPerPage]="12" [inReport]="true" [isReportYear]="true"
            [isBaselineYear]="false" [printBlock]="'savings'" [isGroupModelYear]="modelYearIsReportYear">
        </app-monthly-analysis-summary-table>
    </ng-template>
</ng-container>


<hr>
<ng-container *ngIf="analysisReportSettings.facilityMonthlyResultsGraphs">
    <div class="d-flex w-100" [ngClass]="{'flex-column': print}">
        <div [ngClass]="{'w-50 pe-1': !print, 'w-100 pb-3 print-break-avoid': print}">
            <app-monthly-analysis-summary-graph [monthlyAnalysisSummaryData]="monthlyAnalysisSummaryData"
                [analysisItem]="analysisItem" [facilityOrAccount]="facility">
            </app-monthly-analysis-summary-graph>
        </div>
        <div [ngClass]="{'w-50 pe-1': !print, 'w-100 print-break-avoid': print}">
            <app-monthly-analysis-summary-savings-graph [analysisItem]="analysisItem"
                [monthlyAnalysisSummaryData]="monthlyAnalysisSummaryData" [facilityOrAccount]="facility">
            </app-monthly-analysis-summary-savings-graph>
        </div>
    </div>
</ng-container>