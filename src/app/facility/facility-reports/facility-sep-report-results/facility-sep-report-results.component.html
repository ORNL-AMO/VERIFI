<div class="report" *ngIf="calculating != false">
    <app-calculating-spinner [message]="'Calculating SEP Report Results...'"
        [error]="calculating == 'error'"></app-calculating-spinner>
</div>

<ng-container *ngIf="calculating == false">
    <div class="report" [ngClass]="{'print': print}">
        <img class="w-100" src="assets/images/sep-report-banner.png">
        <div class="pt-2">
            <div class="row justify-content-center">
                <div class="col-12 text-center">
                    <h6 class="bold">
                        Generated By VERIFI
                    </h6>
                </div>
                <div class="col-6">
                    <h5 class="mb-0 bold">Facility:</h5>
                    <span>{{facility.name}}</span><br>
                    <span *ngIf="facility.address">{{facility.address}}<br> {{facility.city}}, {{facility.state}}
                        {{facility.zip}}
                        {{facility.country}}
                    </span>
                </div>
                <div class="col-6 text-end">
                    <h5 class="bold mb-0">Contact Information:</h5>
                    <span *ngIf="facility.contactName">Name: {{facility.contactName}} <br></span>
                    <span *ngIf="!facility.contactName">Name: &mdash; <br></span>
                    <span *ngIf="facility.contactPhone">Phone: {{facility.contactPhone}}<br></span>
                    <span *ngIf="!facility.contactPhone">Phone: &mdash; <br></span>
                    <span *ngIf="facility.contactEmail">Email: {{facility.contactEmail}} <br></span>
                    <span *ngIf="!facility.contactEmail">Email: &mdash; <br></span>
                </div>
                <div class="col-12">
                    <hr>
                </div>
            </div>
        </div>
        <app-sep-results-table [analysisItem]="analysisItem" [facility]="facility"
            [sepReport]="sepReport"></app-sep-results-table>
        <div class="row">
            <div class="col-12">
                <hr>
            </div>
        </div>
        <app-sep-facility-information-table [account]="account"
            [facility]="facility"></app-sep-facility-information-table>
        <div class="row">
            <div class="col-12">
                <hr>
            </div>
        </div>
    </div>
    <div class="report" [ngClass]="{'print': print}">
        <div class="row print-break-avoid">
            <div class="col-12">
                <app-monthly-analysis-summary-graph [facilityOrAccount]="facility"
                    [monthlyAnalysisSummaryData]="sepReport.monthlyAnalysisSummaryData"
                    [analysisItem]="analysisItem"></app-monthly-analysis-summary-graph>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <app-sep-report-graphs [monthlyAnalysisSummaryData]="sepReport.monthlyAnalysisSummaryData"
                    [analysisItem]="analysisItem"></app-sep-report-graphs>
            </div>
        </div>
    </div>
    <div class="report" [ngClass]="{'print': print}" *ngFor="let groupSummary of sepReport.groupSummaries">
        <div class="row print-break-avoid">
            <div class="col-12">
                <h5>{{groupSummary.groupItem.group.idbGroupId | groupName}}</h5>
                <app-regression-model-details [groupItem]="groupSummary.groupItem" [analysisItem]="analysisItem"
                    [facility]="facility" [monthlyAnalysisSummaryData]="groupSummary.monthlyAnalysisSummaryData"
                    [hideGraph]="true"></app-regression-model-details>
            </div>
        </div>
    </div>
    <app-facility-print-report-button></app-facility-print-report-button>
</ng-container>