<div *ngIf="regressionGroupItems.length > 0 || classicIntensityGroupItems.length > 0 || absoluteGroupItems.length > 0"
    class="w-100 justify-content-center">
    <div class="text-center" *ngIf="!analysisReportSetup.includeProblemsInformation">
        <h3>
            {{selectedReport.name}}
        </h3>
    </div>

    <div class="text-center mb-4" *ngIf="!analysisReportSetup.includeProblemsInformation">
        <h6>
            Generated By VERIFI
        </h6>
    </div>
    <div>
        <h4 class="mb-0">
            Executive Summary
        </h4>
    </div>
    <div *ngIf="regressionGroupItems.length > 0">
        <div class="text-center mt-3 pt-3 fw-bold fs-5">
            Analysis Type: Regression
        </div>
        <div class="table-responsive mt-3">
            <table class="table table-bordered">
                <thead>
                    <tr class="table-secondary">
                        <th>
                            Facility
                        </th>
                        <th>
                            Group
                        </th>
                        <th>
                            Baseline Year
                        </th>
                        <th>
                            Model Year
                        </th>
                        <th>
                            Variable p-Values
                        </th>
                        <th>
                            R2
                        </th>
                        <th>
                            Adjusted R2
                        </th>
                        <th>
                            Model Equation
                        </th>
                        <th>
                            Model Notes
                        </th>
                        <th>
                            Model Validation Failures
                        </th>
                        <th>
                            Data Validation Failures
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of regressionGroupItems">
                        <td>
                            {{item.facilityId | facilityName}}
                        </td>
                        <td>
                            {{item.group.idbGroupId | groupName}}
                        </td>
                        <td>
                            {{item.baselineYear}}
                        <td>
                            {{item.group.regressionModelYear}}
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            <span *ngFor="let pVal of item.selectedModel.t.p; let index = index">
                                <span *ngIf="index != 0">{{item.selectedModel.predictorVariables[index-1].name}}:
                                    {{pVal | number:'0.2-2'}}
                                    <br>
                                </span>
                            </span>
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            {{item.selectedModel.R2 | number:'0.3-3'}}
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            {{item.selectedModel.adjust_R2 | number:'0.3-3'}}
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            <span *ngFor="let coefVal of item.selectedModel.coef; let index = index;">
                                <span *ngIf="index == 0">{{coefVal| regressionNumber}}</span>
                                <span *ngIf="index != 0">({{coefVal|
                                    regressionNumber}}*{{item.selectedModel.predictorVariables[index-1].name}})</span>
                                <span *ngIf="index != item.selectedModel.coef.length-1"> +</span>
                            </span>
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            <span *ngFor="let notes of item.selectedModel.modelNotes">
                                {{notes}}<br>
                            </span>
                            <span *ngIf="item.selectedModel.modelNotes.length == 0">
                                &mdash;
                            </span>
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            <span *ngIf="item.selectedModel.isValid">&mdash;</span>
                            <span *ngFor="let notes of item.selectedModel.modelValidationNotes">
                                {{notes}}<br>
                            </span>
                        </td>
                        <td *ngIf="!item.selectedModel.errorModeling">
                            <span *ngFor="let notes of item.selectedModel.dataValidationNotes">
                                {{notes}}<br>
                            </span>
                            <span *ngIf="item.selectedModel.SEPValidationPass">&mdash;</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div *ngIf="classicIntensityGroupItems.length > 0">
        <div class="text-center mt-3 pt-3 fw-bold fs-5">
            Analysis Type: Classic Intensity
        </div>
        <div class="table-responsive mt-3">
            <table class="table table-bordered">
                <thead>
                    <tr class="table-secondary">
                        <th>
                            Facility
                        </th>
                        <th>
                            Group
                        </th>
                        <th>
                            Baseline Year
                        </th>
                        <th>
                            Predictor Variables
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of classicIntensityGroupItems">
                        <td>
                            {{item.facilityId | facilityName}}
                        </td>
                        <td>
                            {{item.group.idbGroupId | groupName}}
                        </td>
                        <td>
                            {{item.baselineYear}}
                        </td>
                        <td>
                            <div *ngFor="let variable of item.group.predictorVariables">
                                <span *ngIf="variable.productionInAnalysis">
                                    {{variable.name}} <br>
                                </span>

                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div *ngIf="absoluteGroupItems.length > 0">
        <div class="text-center mt-3 pt-3 fw-bold fs-5">
            Analysis Type: Absolute
        </div>
        <div class="table-responsive mt-3">
            <table class="table table-bordered">
                <thead>
                    <tr class="table-secondary">
                        <th>
                            Facility
                        </th>
                        <th>
                            Group
                        </th>
                        <th>
                            Baseline Year
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of absoluteGroupItems">
                        <td>
                            {{item.facilityId | facilityName}}
                        </td>
                        <td>
                            {{item.group.idbGroupId | groupName}}
                        </td>
                        <td>
                            {{item.baselineYear}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div *ngIf="regressionGroupItems.length == 0 && classicIntensityGroupItems.length == 0 && absoluteGroupItems.length == 0"
    class="w-100 justify-content-center">
    <div class="text-center mt-3 pt-3 fw-bold fs-5">
        Executive Summary Not Available
    </div>
</div>